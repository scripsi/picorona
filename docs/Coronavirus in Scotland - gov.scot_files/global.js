!function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}({0:function(e,t){e.exports=jQuery},10:function(e,t){!function(){"use strict";function e(e){window.dataLayer[0].userType=e}window.dataLayer=window.dataLayer||[{}];var t=new XMLHttpRequest;t.open("GET","/service/usertype",!0),t.timeout=1e3,t.onreadystatechange=function(){if(4===t.readyState){var n;if(200===t.status)n=JSON.parse(t.responseText).userType;else n="error";e(n),initGTM()}},t.ontimeout=function(){e("timeout"),initGTM()},t.send(null)}()},18:function(e,t,n){"use strict";n.r(t);var i=n(0),s=n.n(i);var o={init:function(e){const t=s()("#"+e);let n=JSON.parse(sessionStorage.getItem(e+"-closed"));n||(t.find(".notification__close").removeClass("notification__close--minimised"),t.find(".notification__extra-content").removeClass("hidden-xsmall")),t.on("click",".notification__close",function(i){i.preventDefault(),t.find(".notification__close").toggleClass("notification__close--minimised"),t.find(".notification__extra-content").toggleClass("hidden-xsmall"),n=!n,sessionStorage.setItem(e+"-closed",JSON.stringify(n)),s()(window).trigger("headerautofixing"),s()(window).trigger("positionnav")})}};var a=function(e,t,n){if(void 0===t){const t=e+"=",n=document.cookie.split(";");for(let e=0,i=n.length;e<i;e++){let i=n[e];for(;" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null}{const i={name:e,value:t};if(n){const e=new Date;e.setTime(e.getTime()+24*n*60*60*1e3),i.expires=e.toUTCString()}let s=e+"="+t+"; ";return i.expires&&(s+="expires="+i.expires+"; "),s+="path=/",document.cookie=s,i}},r=function(){let e=s()("#cookie-notice");a("cookie-notification-acknowledged")?e.addClass("hidden"):e.removeClass("hidden"),e.on("click",".js-close-notification",function(t){t.preventDefault(),e.addClass("hidden"),a("cookie-notification-acknowledged","yes",365),s()(window).trigger("positionnav"),s()(window).trigger("headerautofixing")})};let l={init:function(){s()(".js-expand").each(function(){let e,t,n=s()(this),i=n.attr("data-target-selector"),o=s()(i);0!==o.length&&(e=o.css("line-height"),t=o.height(),"none"!==n.css("display")?l.collapseTarget(o,e,!0):n.addClass("expand--open"),n.click(function(){n.hasClass("expand--open")?(l.collapseTarget(o,e),n.removeClass("expand--open")):(l.expandTarget(o,t),n.addClass("expand--open"))}),n.wrapInner('<span class="hit-target"></span>'),s()(window).resize(function(){n.hasClass("expand--open")?t=o.height():(e=o.css("line-height"),l.collapseTarget(o,e))}))})},collapseTarget:function(e,t,n){const i=n?0:200;e.animate({height:t},i,function(){e.css({overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}),e.children().css("display","inline")})},expandTarget:function(e){const t=e.css("height");e.css({whiteSpace:"normal",height:""}).children().css("display","");const n=e.outerHeight();e.css({height:t}),e.animate({height:n},function(){e.css("height","")})}};var c=l;let d=s()(".site-header");var u={init:function(){let e=this;s()(window).on("scroll",function(){if(window.innerWidth>=768)return void s()(window).trigger("unstickheader");let e=s()("#main-wrapper").offset().top;s()(window).scrollTop()>e?s()(window).trigger("stickheader"):s()(window).trigger("unstickheader")}),s()(window).on("stickheader",function(){d.addClass("site-header--scaled")}),s()(window).on("unstickheader",function(){d.removeClass("site-header--scaled")}),s()(".js-mobile-nav-toggle").on("click",function(){"false"===s()("#"+s()(this).attr("aria-controls")).attr("aria-expanded")?(e.closeMenuItem("search"),e.openMenuItem("nav")):e.closeMenuItem("nav"),s()(".main-nav__list").scrollTop(0)}),s()(".js-mobile-search-toggle").on("click",function(){"false"===s()("#"+s()(this).attr("aria-controls")).attr("aria-expanded")?(e.closeMenuItem("nav"),e.openMenuItem("search"),s()("#search-box-mobile").focus()):e.closeMenuItem("search")})},storedScrollPos:0,scrollToMoveHeaderToTop:function(){let e=parseInt(s()(".notification-wrapper").css("height"));window.scrollTo(0,e)},openMenuItem:function(e){void 0!==e&&(s()(".mobile-"+e).addClass("mobile-layer--open").attr("aria-expanded",!0),s()(".site-header__button--"+e).addClass("site-header__button--selected"),s()(window).trigger("position"+e)),s()(".js-mobile-"+e+"-overlay").addClass("mobile-layer__overlay--open"),s()("body").addClass("has-overlay")},closeMenuItem:function(e){s()(".mobile-"+e).removeClass("mobile-layer--open").attr("aria-expanded",!1),s()(".site-header__button--"+e).removeClass("site-header__button--selected"),s()(".js-mobile-"+e+"-overlay").removeClass("mobile-layer__overlay--open"),s()("body").removeClass("has-overlay")}};n(10);const m={settings:{feedbackUrl:"/service/feedback/",badServer:"I'm sorry, we have a problem at our side, please try again later"},init:function(){this.attachEventHandlers()},attachEventHandlers:function(){const e=this;s()(".js-feedback-type").on("change",function(t){e.removeErrorMessages(),e.feedbackType=t.target.value,s()(".feedback__field").addClass("hidden"),s()(".feedback__field").attr("disabled",!0),s()(".feedback__field--"+e.feedbackType).removeClass("hidden"),s()(".feedback__field--"+e.feedbackType).removeAttr("disabled"),s()(".feedback__select").each(function(){s()(this).find("option:eq(0)").prop("selected",!0)}),s()("#feedback").css("visibility","hidden"),s()("#feedback").css("visibility","visible")}),s()("#feedback-form").on("submit",function(t){t.preventDefault(),e.removeErrorMessages();const n={slug:document.location.pathname,type:e.feedbackType,freetext:s()("#feedback-comment").val(),category:s()("#page-category").val(),errors:[]},i=s()(".feedback__select:not(.hidden)");i.length>0&&(n.reason=i.val()||""),n.hippoContentItem=window.location.pathname,n.contentItem=document.getElementById("documentUuid").value,e.validateFeedback()&&e.sendFeedback(n)})},validateFeedback:function(){let e=!0;const t=s()(".required--"+this.feedbackType);for(let n=0,i=t.length;n<i;n++){const i=s()(t[n]);""!==i.val()&&null!==i.val()||(this.addError(i.data("message"),i.closest(".input-group")),e=!1)}return e},sendFeedback:function(e){const t=this;s.a.ajax({type:"POST",url:t.settings.feedbackUrl,data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json"}).then(function(){s()("#feedback-form").addClass("hidden"),s()(".feedback-thanks").removeClass("hidden"),window.dataLayer=window.dataLayer||[],window.dataLayer.push({type:e.type,reason:e.reason,event:"feedbackSubmit"})},function(n){if(201===n.status)s()("#feedback-form").addClass("hidden"),s()(".feedback__thanks").removeClass("hidden"),window.dataLayer=window.dataLayer||[],window.dataLayer.push({type:e.type,reason:e.reason,event:"feedbackSubmit"});else{const e=s()("#feedback-form").find("[type=submit]");t.addError(t.settings.badServer,e.parent())}})},removeErrorMessages:function(){s()(".input-group--has-error").removeClass("input-group--has-error").find(".message").remove()},addError:function(e,t){let n=t.find(".message");0===n.length&&(n=s()('<div class="message"></div>')).prependTo(t),n.text(e),t.addClass("input-group--has-error")}};m.init();var h=class{constructor(e){this.field=e,this.inputElement=this.field.querySelector("input, textarea"),this.threshold=this.field.dataset.threshold?.01*this.field.dataset.threshold:0}init(){this.inputElement&&(this.setMaxLength(),this.maxLength&&(this.messageElement=document.createElement("div"),this.messageElement.setAttribute("aria-live","polite"),this.messageElement.classList.add("ds_input__message","ds_hint-text"),this.messageElement.innerText=`You can enter up to ${this.maxLength} characters`,this.inputElement.value.length<this.maxLength*this.threshold&&this.messageElement.classList.add("hidden","hidden--hard"),this.field.appendChild(this.messageElement),this.inputElement.addEventListener("keyup",this.checkIfChanged.bind(this))))}setMaxLength(){this.inputElement.getAttribute("maxlength")?(this.maxLength=parseInt(this.inputElement.getAttribute("maxlength"),10),this.inputElement.removeAttribute("maxlength")):this.maxLength=this.field.dataset.maxlength}checkIfChanged(){this.inputElement.oldValue||(this.inputElement.oldValue=""),this.inputElement.value!==this.inputElement.oldValue&&(this.inputElement.oldValue=this.inputElement.value,this.updateCountMessage.bind(this)())}updateCountMessage(){const e=this.maxLength-this.inputElement.value.length;let t="characters";1===Math.abs(e)&&(t="character"),this.messageElement.innerText=`You have ${e} ${t} remaining`,e<0?(this.inputElement.classList.add("ds_input--error"),this.inputElement.setAttribute("aria-invalid",!0),this.messageElement.innerText=`You have ${Math.abs(e)} ${t} too many`,this.messageElement.classList.remove("ds_hint-text")):(this.inputElement.classList.remove("ds_input--error"),this.inputElement.setAttribute("aria-invalid",!1),this.messageElement.innerText=`You have ${e} ${t} remaining`,this.messageElement.classList.add("ds_hint-text")),this.inputElement.value.length<this.maxLength*this.threshold?this.messageElement.classList.add("hidden"):this.messageElement.classList.remove("hidden")}};[].slice.call(document.querySelectorAll('[data-module="ds-character-count"]')).forEach(e=>new h(e).init());const f={settings:{paymentUrl:"/service/payment"},init:function(){this.attachEventHandlers()},attachEventHandlers:function(){const e=this;s()("#payment-form").on("submit",function(t){t.preventDefault();const n={orderCode:s()("#orderCode").val(),amount:s()("#amount").val(),description:s()("#description").val(),emailAddress:s()("#email").val()};e.removeErrorMessages(),e.validateInputs()&&e.sendPayment(n)})},validateInputs:function(){const e=[],t=document.getElementById("orderCode"),n=t.parentNode,i=document.getElementById("amount"),s=i.parentNode.parentNode,o=document.getElementById("email"),a=o.parentNode,r=document.getElementById("error-summary");if(t.value.length>64&&(e.push({message:"Payment Reference is too long (maximum is 64 characters)",element:t}),n.classList.add("ds_question--error"),t.classList.add("ds_input--error")),t.value.indexOf(" ")>-1){e.push({message:"Payment Reference cannot contain spaces",element:t}),n.classList.add("ds_question--error"),t.classList.add("ds_input--error"),n.querySelector("#payment-ref-spaces").classList.remove("hidden")}if(parseFloat(i.value)>5e3){e.push({message:"Amount cannot be more than £5000.00",element:i}),s.classList.add("ds_question--error"),i.classList.add("ds_input--error"),s.querySelector("#amount-max").classList.remove("hidden")}if(o.value.length>0){const t=o.value.trim(),n=/^[^@ ]+@[^@ ]+\.[^@ ]+$/;if(!(""===t||null!==t.match(n))){e.push({message:"Email address is not in a valid format",element:o}),a.classList.add("ds_question--error"),o.classList.add("ds_input--error"),a.querySelector("#invalid-email").classList.remove("hidden")}}if(e.length){const t=document.createElement("ul");t.classList.add("ds_error-summary__list"),e.forEach(function(e){const n=document.createElement("li"),i=document.createElement("a");i.innerText=e.message,i.href=`#${e.element.id}`,n.appendChild(i),t.appendChild(n),i.addEventListener("click",e=>{e.preventDefault();const t=document.querySelector(e.target.getAttribute("href"));let n=t;for(;!n.classList.contains("ds_question");)n=n.parentNode;n.scrollIntoView(),t.focus()})}),r.appendChild(t),this.showErrorSummary()}return 0===e.length},sendPayment:function(e){const t=this;s.a.ajax({type:"POST",url:this.settings.paymentUrl,data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(e){window.location.href=e.paymentUrl}).fail(function(){document.getElementById("error-summary").querySelector(".error-summary-message").innerText="Sorry, we are currently unable to submit your request. Please try again later.",t.showErrorSummary()})},removeErrorMessages:function(){const e=document.getElementById("error-summary");e.querySelector(".error-summary-message").innerHTML="",[].slice.call(e.querySelectorAll("ul")).forEach(e=>e.parentNode.removeChild(e)),e.classList.add("hidden"),[].slice.call(document.querySelectorAll(".ds_question--error")).forEach(e=>e.classList.remove("ds_question--error")),[].slice.call(document.querySelectorAll(".ds_input--error")).forEach(e=>e.classList.remove("ds_input--error")),[].slice.call(document.querySelectorAll(".ds_question__message")).forEach(e=>e.classList.add("hidden"))},showErrorSummary:function(){const e=document.getElementById("error-summary");e.classList.remove("hidden"),e.scrollIntoView(),e.classList.add("flashable--flash"),window.setTimeout(function(){e.classList.remove("flashable--flash")},200)}};f.init();const p={init:function(){document.documentElement.classList.add("js-enabled");const e=document.querySelector("#mobile-navigation-menu");if(!e)return;const t=document.querySelector(".js-toggle-menu"),n=document.querySelector("#mobile-navigation-menu"),i=document.querySelector(".js-close-menu");t.addEventListener("click",function(){n.classList.toggle("menu-is-open");const s=n.classList.contains("menu-is-open");s?p.openMenu(e):p.closeMenu(),t.setAttribute("aria-expanded",s),i.setAttribute("aria-expanded",s),s?t.classList.add("ds_mobile-navigation__button--open"):t.classList.remove("ds_mobile-navigation__button--open")}),i.addEventListener("click",function(){n.classList.remove("menu-is-open"),p.closeMenu(),t.setAttribute("aria-expanded",!1),i.setAttribute("aria-expanded",!1),t.classList.remove("ds_mobile-navigation__button--open")})},openMenu:function(e){window.scrollTo(0,window.scrollX);const t=document.querySelector("html"),n=document.querySelector("body"),i=document.querySelector(e.dataset.offsetselector),s=i?i.offsetHeight:0,o=i?i.offsetTop:0,a=document.querySelector(".ds_mobile-navigation");a.style.top=s+"px",a.offsetHeight+s>window.innerHeight?a.style.bottom=s-window.innerHeight+"px":a.style.bottom=null;const r=a.offsetHeight;a.querySelector(".ds_mobile-navigation__backdrop").style.top=r+s+o+"px",t.style.position="relative",n.style.position="relative",t.classList.add("menu-is-open"),t.style.height=window.innerHeight+"px",n.style.height=window.innerHeight+"px"},closeMenu:function(){const e=document.querySelector("html"),t=document.querySelector("body"),n=document.querySelector(".ds_mobile-navigation");e.style.position=null,t.style.position=null,e.classList.remove("menu-is-open"),e.style.height=null,t.style.height=null,n.style.bottom=null}};p.init();var g=class{constructor(e){this.notification=e,this.notificationClose=e.querySelector(".js-close-notification")}init(){a("importantNotice")||this.notification.classList.remove("hidden"),this.notificationClose&&(this.notificationClose.style.display="block",this.notificationClose.addEventListener("click",()=>{this.notification.parentNode.removeChild(this.notification),a("importantNotice","true",1)}))}};const y={compensateAnchorOffsetForStickyElements:function(){void 0!==window.pageXOffset&&(window.location.hash&&s()(window.location.hash).length&&window.setTimeout(function(){window.scrollTo(window.pageXOffset,parseInt(s()(window.location.hash).offset().top,10)-100)},300),s()('a[href^="#"]:not(.js-display-toggle)').on("click",function(){window.setTimeout(function(){window.scrollTo(window.pageXOffset,window.pageYOffset-100)},10)}))},svgFallback:function(){document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")||s()('img[src$=".svg"]').each(function(){s()(this).attr("src",s()(this).attr("src").replace(/\.svg$/,".png"))})},initPubsub:function(){const e=s()({});s.a.subscribe=function(){e.on.apply(e,arguments)},s.a.unsubscribe=function(){e.off.apply(e,arguments)},s.a.publish=function(){e.trigger.apply(e,arguments)},window.pubsub=s.a},initNotifications:function(){[].slice.call(document.querySelectorAll('[data-module="ds-notification"]')).forEach(e=>new g(e).init())},init:function(){this.initPubsub(),this.svgFallback(),this.compensateAnchorOffsetForStickyElements(),o.init("staging-banner"),r(),c.init(),u.init(),this.initNotifications()}};y.init();t.default=y}});