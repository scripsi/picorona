!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}({0:function(e,t){e.exports=jQuery},10:function(e,t){!function(){"use strict";function e(e){window.dataLayer[0].userType=e}window.dataLayer=window.dataLayer||[{}];var t=new XMLHttpRequest;t.open("GET","/service/usertype",!0),t.timeout=1e3,t.onreadystatechange=function(){if(4===t.readyState){var n;if(200===t.status)n=JSON.parse(t.responseText).userType;else n="error";e(n),initGTM()}},t.ontimeout=function(){e("timeout"),initGTM()},t.send(null)}()},18:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),s={init:function(e){var t=a()("#"+e),n=JSON.parse(sessionStorage.getItem(e+"-closed"));n||(t.find(".notification__close").removeClass("notification__close--minimised"),t.find(".notification__extra-content").removeClass("hidden-xsmall")),t.on("click",".notification__close",function(i){i.preventDefault(),t.find(".notification__close").toggleClass("notification__close--minimised"),t.find(".notification__extra-content").toggleClass("hidden-xsmall"),n=!n,sessionStorage.setItem(e+"-closed",JSON.stringify(n)),a()(window).trigger("headerautofixing"),a()(window).trigger("positionnav")})}},o=function(e,t,n){if(void 0===t){for(var i=e+"=",a=document.cookie.split(";"),s=0,o=a.length;s<o;s++){for(var r=a[s];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(i))return r.substring(i.length,r.length)}return null}var l={name:e,value:t};if(n){var c=new Date;c.setTime(c.getTime()+24*n*60*60*1e3),l.expires=c.toUTCString()}var d=e+"="+t+"; ";return l.expires&&(d+="expires="+l.expires+"; "),d+="path=/",document.cookie=d,l},r=function(){var e=a()("#cookie-notice");o("cookie-notification-acknowledged")?e.addClass("hidden"):e.removeClass("hidden"),e.on("click",".js-close-notification",function(t){t.preventDefault(),e.addClass("hidden"),o("cookie-notification-acknowledged","yes",365),a()(window).trigger("positionnav"),a()(window).trigger("headerautofixing")})},l={init:function(){a()(".js-expand").each(function(){var e,t,n=a()(this),i=n.attr("data-target-selector"),s=a()(i);0!==s.length&&(e=s.css("line-height"),t=s.height(),"none"!==n.css("display")?l.collapseTarget(s,e,!0):n.addClass("expand--open"),n.click(function(){n.hasClass("expand--open")?(l.collapseTarget(s,e),n.removeClass("expand--open")):(l.expandTarget(s,t),n.addClass("expand--open"))}),n.wrapInner('<span class="hit-target"></span>'),a()(window).resize(function(){n.hasClass("expand--open")?t=s.height():(e=s.css("line-height"),l.collapseTarget(s,e))}))})},collapseTarget:function(e,t,n){var i=n?0:200;e.animate({height:t},i,function(){e.css({overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}),e.children().css("display","inline")})},expandTarget:function(e){var t=e.css("height");e.css({whiteSpace:"normal",height:""}).children().css("display","");var n=e.outerHeight();e.css({height:t}),e.animate({height:n},function(){e.css("height","")})}},c=l,d=a()(".site-header"),u={init:function(){var e=this;a()(window).on("scroll",function(){if(window.innerWidth>=768)a()(window).trigger("unstickheader");else{var e=a()("#main-wrapper").offset().top;a()(window).scrollTop()>e?a()(window).trigger("stickheader"):a()(window).trigger("unstickheader")}}),a()(window).on("stickheader",function(){d.addClass("site-header--scaled")}),a()(window).on("unstickheader",function(){d.removeClass("site-header--scaled")}),a()(".js-mobile-nav-toggle").on("click",function(){"false"===a()("#"+a()(this).attr("aria-controls")).attr("aria-expanded")?(e.closeMenuItem("search"),e.openMenuItem("nav")):e.closeMenuItem("nav"),a()(".main-nav__list").scrollTop(0)}),a()(".js-mobile-search-toggle").on("click",function(){"false"===a()("#"+a()(this).attr("aria-controls")).attr("aria-expanded")?(e.closeMenuItem("nav"),e.openMenuItem("search"),a()("#search-box-mobile").focus()):e.closeMenuItem("search")})},storedScrollPos:0,scrollToMoveHeaderToTop:function(){var e=parseInt(a()(".notification-wrapper").css("height"));window.scrollTo(0,e)},openMenuItem:function(e){void 0!==e&&(a()(".mobile-"+e).addClass("mobile-layer--open").attr("aria-expanded",!0),a()(".site-header__button--"+e).addClass("site-header__button--selected"),a()(window).trigger("position"+e)),a()(".js-mobile-"+e+"-overlay").addClass("mobile-layer__overlay--open"),a()("body").addClass("has-overlay")},closeMenuItem:function(e){a()(".mobile-"+e).removeClass("mobile-layer--open").attr("aria-expanded",!1),a()(".site-header__button--"+e).removeClass("site-header__button--selected"),a()(".js-mobile-"+e+"-overlay").removeClass("mobile-layer__overlay--open"),a()("body").removeClass("has-overlay")}},m=(n(10),{settings:{feedbackUrl:"/service/feedback/",badServer:"I'm sorry, we have a problem at our side, please try again later"},init:function(){this.attachEventHandlers()},attachEventHandlers:function(){var e=this;a()(".js-feedback-type").on("change",function(t){e.removeErrorMessages(),e.feedbackType=t.target.value,a()(".feedback__field").addClass("hidden"),a()(".feedback__field").attr("disabled",!0),a()(".feedback__field--"+e.feedbackType).removeClass("hidden"),a()(".feedback__field--"+e.feedbackType).removeAttr("disabled"),a()(".feedback__select").each(function(){a()(this).find("option:eq(0)").prop("selected",!0)}),a()("#feedback").css("visibility","hidden"),a()("#feedback").css("visibility","visible")}),a()("#feedback-form").on("submit",function(t){t.preventDefault(),e.removeErrorMessages();var n={slug:document.location.pathname,type:e.feedbackType,freetext:a()("#feedback-comment").val(),category:a()("#page-category").val(),errors:[]},i=a()(".feedback__select:not(.hidden)");i.length>0&&(n.reason=i.val()||""),n.hippoContentItem=window.location.pathname,n.contentItem=document.getElementById("documentUuid").value,e.validateFeedback()&&e.sendFeedback(n)})},validateFeedback:function(){for(var e=!0,t=a()(".required--"+this.feedbackType),n=0,i=t.length;n<i;n++){var s=a()(t[n]);""!==s.val()&&null!==s.val()||(this.addError(s.data("message"),s.closest(".input-group")),e=!1)}return e},sendFeedback:function(e){var t=this;a.a.ajax({type:"POST",url:t.settings.feedbackUrl,data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json"}).then(function(){a()("#feedback-form").addClass("hidden"),a()(".feedback-thanks").removeClass("hidden"),window.dataLayer=window.dataLayer||[],window.dataLayer.push({type:e.type,reason:e.reason,event:"feedbackSubmit"})},function(n){if(201===n.status)a()("#feedback-form").addClass("hidden"),a()(".feedback__thanks").removeClass("hidden"),window.dataLayer=window.dataLayer||[],window.dataLayer.push({type:e.type,reason:e.reason,event:"feedbackSubmit"});else{var i=a()("#feedback-form").find("[type=submit]");t.addError(t.settings.badServer,i.parent())}})},removeErrorMessages:function(){a()(".input-group--has-error").removeClass("input-group--has-error").find(".message").remove()},addError:function(e,t){var n=t.find(".message");0===n.length&&(n=a()('<div class="message"></div>')).prependTo(t),n.text(e),t.addClass("input-group--has-error")}});m.init();function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.field=t,this.inputElement=this.field.querySelector("input, textarea"),this.threshold=this.field.dataset.threshold?.01*this.field.dataset.threshold:0}var t,n,i;return t=e,(n=[{key:"init",value:function(){this.inputElement&&(this.setMaxLength(),this.maxLength&&(this.messageElement=document.createElement("div"),this.messageElement.setAttribute("aria-live","polite"),this.messageElement.classList.add("ds_input__message","ds_hint-text"),this.messageElement.innerText="You can enter up to ".concat(this.maxLength," characters"),this.inputElement.value.length<this.maxLength*this.threshold&&this.messageElement.classList.add("hidden","hidden--hard"),this.field.appendChild(this.messageElement),this.inputElement.addEventListener("keyup",this.checkIfChanged.bind(this))))}},{key:"setMaxLength",value:function(){this.inputElement.getAttribute("maxlength")?(this.maxLength=parseInt(this.inputElement.getAttribute("maxlength"),10),this.inputElement.removeAttribute("maxlength")):this.maxLength=this.field.dataset.maxlength}},{key:"checkIfChanged",value:function(){this.inputElement.oldValue||(this.inputElement.oldValue=""),this.inputElement.value!==this.inputElement.oldValue&&(this.inputElement.oldValue=this.inputElement.value,this.updateCountMessage.bind(this)())}},{key:"updateCountMessage",value:function(){var e=this.maxLength-this.inputElement.value.length,t="characters";1===Math.abs(e)&&(t="character"),this.messageElement.innerText="You have ".concat(e," ").concat(t," remaining"),e<0?(this.inputElement.classList.add("ds_input--error"),this.inputElement.setAttribute("aria-invalid",!0),this.messageElement.innerText="You have ".concat(Math.abs(e)," ").concat(t," too many"),this.messageElement.classList.remove("ds_hint-text")):(this.inputElement.classList.remove("ds_input--error"),this.inputElement.setAttribute("aria-invalid",!1),this.messageElement.innerText="You have ".concat(e," ").concat(t," remaining"),this.messageElement.classList.add("ds_hint-text")),this.inputElement.value.length<this.maxLength*this.threshold?this.messageElement.classList.add("hidden"):this.messageElement.classList.remove("hidden")}}])&&h(t.prototype,n),i&&h(t,i),e}();[].slice.call(document.querySelectorAll('[data-module="ds-character-count"]')).forEach(function(e){return new f(e).init()});var p={settings:{paymentUrl:"/service/payment"},init:function(){this.attachEventHandlers()},attachEventHandlers:function(){var e=this;a()("#payment-form").on("submit",function(t){t.preventDefault();var n={orderCode:a()("#orderCode").val(),amount:a()("#amount").val(),description:a()("#description").val(),emailAddress:a()("#email").val()};e.removeErrorMessages(),e.validateInputs()&&e.sendPayment(n)})},validateInputs:function(){var e=[],t=document.getElementById("orderCode"),n=t.parentNode,i=document.getElementById("amount"),a=i.parentNode.parentNode,s=document.getElementById("email"),o=s.parentNode,r=document.getElementById("error-summary");(t.value.length>64&&(e.push({message:"Payment Reference is too long (maximum is 64 characters)",element:t}),n.classList.add("ds_question--error"),t.classList.add("ds_input--error")),t.value.indexOf(" ")>-1)&&(e.push({message:"Payment Reference cannot contain spaces",element:t}),n.classList.add("ds_question--error"),t.classList.add("ds_input--error"),n.querySelector("#payment-ref-spaces").classList.remove("hidden"));parseFloat(i.value)>5e3&&(e.push({message:"Amount cannot be more than £5000.00",element:i}),a.classList.add("ds_question--error"),i.classList.add("ds_input--error"),a.querySelector("#amount-max").classList.remove("hidden"));if(s.value.length>0){var l=s.value.trim();if(!(""===l||null!==l.match(/^[^@ ]+@[^@ ]+\.[^@ ]+$/)))e.push({message:"Email address is not in a valid format",element:s}),o.classList.add("ds_question--error"),s.classList.add("ds_input--error"),o.querySelector("#invalid-email").classList.remove("hidden")}if(e.length){var c=document.createElement("ul");c.classList.add("ds_error-summary__list"),e.forEach(function(e){var t=document.createElement("li"),n=document.createElement("a");n.innerText=e.message,n.href="#".concat(e.element.id),t.appendChild(n),c.appendChild(t),n.addEventListener("click",function(e){e.preventDefault();for(var t=document.querySelector(e.target.getAttribute("href")),n=t;!n.classList.contains("ds_question");)n=n.parentNode;n.scrollIntoView(),t.focus()})}),r.appendChild(c),this.showErrorSummary()}return 0===e.length},sendPayment:function(e){var t=this;a.a.ajax({type:"POST",url:this.settings.paymentUrl,data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(e){window.location.href=e.paymentUrl}).fail(function(){document.getElementById("error-summary").querySelector(".error-summary-message").innerText="Sorry, we are currently unable to submit your request. Please try again later.",t.showErrorSummary()})},removeErrorMessages:function(){var e=document.getElementById("error-summary");e.querySelector(".error-summary-message").innerHTML="",[].slice.call(e.querySelectorAll("ul")).forEach(function(e){return e.parentNode.removeChild(e)}),e.classList.add("hidden"),[].slice.call(document.querySelectorAll(".ds_question--error")).forEach(function(e){return e.classList.remove("ds_question--error")}),[].slice.call(document.querySelectorAll(".ds_input--error")).forEach(function(e){return e.classList.remove("ds_input--error")}),[].slice.call(document.querySelectorAll(".ds_question__message")).forEach(function(e){return e.classList.add("hidden")})},showErrorSummary:function(){var e=document.getElementById("error-summary");e.classList.remove("hidden"),e.scrollIntoView(),e.classList.add("flashable--flash"),window.setTimeout(function(){e.classList.remove("flashable--flash")},200)}};p.init();var g={init:function(){document.documentElement.classList.add("js-enabled");var e=document.querySelector("#mobile-navigation-menu");if(e){var t=document.querySelector(".js-toggle-menu"),n=document.querySelector("#mobile-navigation-menu"),i=document.querySelector(".js-close-menu");t.addEventListener("click",function(){n.classList.toggle("menu-is-open");var a=n.classList.contains("menu-is-open");a?g.openMenu(e):g.closeMenu(),t.setAttribute("aria-expanded",a),i.setAttribute("aria-expanded",a),a?t.classList.add("ds_mobile-navigation__button--open"):t.classList.remove("ds_mobile-navigation__button--open")}),i.addEventListener("click",function(){n.classList.remove("menu-is-open"),g.closeMenu(),t.setAttribute("aria-expanded",!1),i.setAttribute("aria-expanded",!1),t.classList.remove("ds_mobile-navigation__button--open")})}},openMenu:function(e){window.scrollTo(0,window.scrollX);var t=document.querySelector("html"),n=document.querySelector("body"),i=document.querySelector(e.dataset.offsetselector),a=i?i.offsetHeight:0,s=i?i.offsetTop:0,o=document.querySelector(".ds_mobile-navigation");o.style.top=a+"px",o.offsetHeight+a>window.innerHeight?o.style.bottom=a-window.innerHeight+"px":o.style.bottom=null;var r=o.offsetHeight;o.querySelector(".ds_mobile-navigation__backdrop").style.top=r+a+s+"px",t.style.position="relative",n.style.position="relative",t.classList.add("menu-is-open"),t.style.height=window.innerHeight+"px",n.style.height=window.innerHeight+"px"},closeMenu:function(){var e=document.querySelector("html"),t=document.querySelector("body"),n=document.querySelector(".ds_mobile-navigation");e.style.position=null,t.style.position=null,e.classList.remove("menu-is-open"),e.style.height=null,t.style.height=null,n.style.bottom=null}};function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}g.init();var y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.notification=t,this.notificationClose=t.querySelector(".js-close-notification")}var t,n,i;return t=e,(n=[{key:"init",value:function(){var e=this;o("importantNotice")||this.notification.classList.remove("hidden"),this.notificationClose&&(this.notificationClose.style.display="block",this.notificationClose.addEventListener("click",function(){e.notification.parentNode.removeChild(e.notification),o("importantNotice","true",1)}))}}])&&v(t.prototype,n),i&&v(t,i),e}(),b={compensateAnchorOffsetForStickyElements:function(){void 0!==window.pageXOffset&&(window.location.hash&&a()(window.location.hash).length&&window.setTimeout(function(){window.scrollTo(window.pageXOffset,parseInt(a()(window.location.hash).offset().top,10)-100)},300),a()('a[href^="#"]:not(.js-display-toggle)').on("click",function(){window.setTimeout(function(){window.scrollTo(window.pageXOffset,window.pageYOffset-100)},10)}))},svgFallback:function(){document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")||a()('img[src$=".svg"]').each(function(){a()(this).attr("src",a()(this).attr("src").replace(/\.svg$/,".png"))})},initPubsub:function(){var e=a()({});a.a.subscribe=function(){e.on.apply(e,arguments)},a.a.unsubscribe=function(){e.off.apply(e,arguments)},a.a.publish=function(){e.trigger.apply(e,arguments)},window.pubsub=a.a},initNotifications:function(){[].slice.call(document.querySelectorAll('[data-module="ds-notification"]')).forEach(function(e){return new y(e).init()})},init:function(){this.initPubsub(),this.svgFallback(),this.compensateAnchorOffsetForStickyElements(),s.init("staging-banner"),r(),c.init(),u.init(),this.initNotifications()}};b.init();t.default=b}});